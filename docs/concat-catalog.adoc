// SPDX-License-Identifier: PMPL-1.0
= proven-concat Catalog
:toc: macro
:toclevels: 2

This catalog lists "concat blocks" (compositions of `proven` modules) and example mini-program cores. The intent is to assemble verified cores that you can drop into your runtime of choice with minimal glue.

== Concat Blocks

=== Input and configuration

* `SafeArgs` + `SafeEnv` + `SafePath` + `SafeFile` + `SafeSchema`
* Purpose: safe CLI + env + config file pipeline, with schema-checked config objects.

=== Web/API core

* `SafeHTTP` + `SafeHeader` + `SafeUrl` + `SafeContentType`
* Add-ons: `SafeCookie`, `SafeJWT`, `SafeOAuth`, `SafeRateLimiter`, `SafeWebhook`
* Purpose: validated request/response core you can plug into a server runtime.

=== Data ingestion

* `SafeCSV` + `SafeJson` + `SafeXML` + `SafeYAML` + `SafeTOML`
* Add-ons: `SafeDateTime`, `SafeDecimal`
* Purpose: safe parsers and validators for incoming datasets.

=== Network guard

* `SafeNetwork` + `SafeDNS` + `SafeCert` + `SafeSSH` + `SafePolicy`
* Purpose: validated network identifiers, certificates, and access policy components.

=== Storage and state

* `SafeStateMachine` + `SafeTransaction` + `SafeQueue` + `SafeLRU` + `SafeBloom`
* Purpose: safe state transition cores with bounded resource behavior.

=== Resilience

* `SafeRetry` + `SafeCircuitBreaker` + `SafeRateLimiter` + `SafeLog`
* Purpose: safe, bounded retry and protection patterns.

== Example Mini-Program Cores

Each "core" is the verified logic. You attach IO/runtime with `proven-io` or your preferred backend.

* link:cores/safe-config-loader.adoc[Safe config loader core]
  * `SafeArgs` + `SafeEnv` + `SafeFile` + `SafeSchema` + (JSON/TOML/YAML)
* link:cores/safe-webhook-core.adoc[Safe webhook core]
  * `SafeHTTP` + `SafeHeader` + `SafeUrl` + `SafeContentType` + `SafeJson` + `SafeJWT`
* link:cores/safe-router-table.adoc[Safe router table core]
  * `SafeUrl` + `SafeRegex` + `SafeHeader` + `SafeContentType`
* CSV to JSON transformer core
  * `SafeCSV` + `SafeJson` + `SafeDateTime` + `SafeDecimal`
* Safe scheduler core
  * `SafeCron` + `SafeRetry` + `SafeCircuitBreaker` + `SafeRateLimiter`

== Composition Recipes (Minimal Glue)

Each recipe shows a verified core made by composing `proven` modules. The IO/runtime layer is intentionally left to the host project.

=== Recipe 1: Safe Config Loader

* Modules: `SafeArgs` + `SafeEnv` + `SafePath` + `SafeFile` + `SafeSchema` + (`SafeJson`|`SafeTOML`|`SafeYAML`)
* Core flow:
  * Parse CLI + env for config path/options
  * Validate path and file existence
  * Parse config format
  * Validate config against schema
* Output: typed config record or validated map

=== Recipe 2: Safe Webhook Core

* Modules: `SafeHTTP` + `SafeHeader` + `SafeUrl` + `SafeContentType` + `SafeJson` + `SafeJWT` + `SafeRateLimiter` + `SafeLog`
* Core flow:
  * Validate method + URL + headers
  * Enforce content-type and decode JSON
  * Verify signature/token
  * Apply rate limits and log audit events
* Output: verified webhook payload + metadata

=== Recipe 3: Safe Router Table

* Modules: `SafeUrl` + `SafeRegex` + `SafeHeader` + `SafeContentType`
* Core flow:
  * Match request path against safe regex table
  * Validate header invariants for route
  * Validate content-type per route
* Output: matched route + verified route inputs

=== Recipe 4: Safe CLI Pipeline

* Modules: `SafeArgs` + (`SafeCSV`|`SafeJson`) + `SafeFile` + `SafeChecksum` + `SafeLog`
* Core flow:
  * Parse CLI flags and input/output paths
  * Validate input file and checksum
  * Parse data and produce verified output
* Output: validated dataset or transformed output

=== Recipe 5: Safe Scheduler Core

* Modules: `SafeCron` + `SafeRetry` + `SafeCircuitBreaker` + `SafeRateLimiter` + `SafeLog`
* Core flow:
  * Validate schedule expressions
  * Wrap task execution with retry/breaker/limits
  * Emit structured logs for runs/failures
* Output: guarded task runner policy

== Module Inventory (from `proven/src`)

Short intent tags for each top-level module. Submodules (`/Parser`, `/Proofs`, `/Types`, etc.) are omitted here but are part of the module families.

=== Core and foundations

* `Proven` - umbrella exports
* `Proven.Core` - core proofs and primitives
* `SafeInput` - validated input primitives
* `SafeHistory` - safe audit trails and histories
* `SafeState` - safe state container patterns
* `SafeUnit` - unit-safe values
* `SafeOrdering` - safe comparisons and ordering proofs
* `SafeInterval` - bounded interval handling
* `SafeMonotonic` - monotonicity guarantees
* `SafeVersion` - version parsing/constraints
* `SafeProvenance` - provenance metadata

=== Text, encoding, markup

* `SafeString` - validated/escaped strings
* `SafeRegex` - safe regex parsing/matching
* `SafeMarkdown` - safe markdown structures
* `SafeHtml` - safe HTML building/sanitizing
* `SafeXML` - safe XML building/parsing
* `SafeTemplate` - safe templating primitives
* `SafeI18n` - safe locale/i18n handling
* `SafeHex` - hex encoding/decoding
* `SafeBase64` - base64 encoding/decoding
* `SafeBibTeX` - safe BibTeX parsing

=== Data formats

* `SafeJson` - safe JSON parsing/access
* `SafeYAML` - safe YAML parsing
* `SafeTOML` - safe TOML parsing
* `SafeCSV` - safe CSV parsing

=== Web and API core

* `SafeHTTP` - HTTP method/status/message handling
* `SafeHeader` - validated headers
* `SafeContentType` - content-type parsing/validation
* `SafeCookie` - cookie parsing/validation
* `SafeUrl` - URL parsing/validation
* `SafeWebhook` - webhook validation primitives
* `SafeOAuth` - OAuth-safe structures
* `SafeJWT` - JWT decode/validate structures

=== CLI, env, files, commands

* `SafeArgs` - CLI argument parsing
* `SafeEnv` - environment variable access
* `SafePath` - safe path parsing/operations
* `SafeFile` - safe file operations
* `SafeCommand` - safe command building/escaping

=== Security and identity

* `SafeCrypto` - cryptographic primitives
* `SafeChecksum` - checksum validation
* `SafePassword` - password policies and hashing
* `SafeCert` - certificate structures/validation
* `SafeSSH` - SSH key/connection safety
* `SafeUUID` - UUID parsing/validation

=== Network

* `SafeNetwork` - IP/CIDR/port validation
* `SafeDNS` - DNS-safe structures

=== State and data structures

* `SafeStateMachine` - safe state transitions
* `SafeTransaction` - transaction modeling
* `SafeQueue` - bounded queue
* `SafeLRU` - safe LRU cache
* `SafeBloom` - safe bloom filter
* `SafeSet` - safe sets
* `SafeUnionFind` - union-find with proofs
* `SafeTree` - safe tree structures
* `SafeGraph` - safe graphs
* `SafeHeap` - safe heap structures
* `SafeBuffer` - safe buffer handling
* `SafeResource` - resource constraints

=== Math and scientific

* `SafeMath` - numeric proof utilities
* `SafeDecimal` - decimal-safe arithmetic
* `SafeRational` - rationals
* `SafeFloat` - safe floating points
* `SafeComplex` - complex numbers
* `SafeMatrix` - matrix structures
* `SafeTensor` - tensor structures
* `SafeProbability` - probability-safe ops
* `SafeFiniteField` - finite field arithmetic
* `SafeCalculator` - safe calculator primitives
* `SafeAngle` - angle-safe values
* `SafeGeo` - geospatial-safe values
* `SafeColor` - color-safe values
* `SafeCurrency` - currency-safe values
* `SafeBitset` - bitset-safe operations

=== Time, scheduling, resilience

* `SafeDateTime` - date/time parsing and zones
* `SafeCron` - cron schedule validation
* `SafeRetry` - bounded retry logic
* `SafeCircuitBreaker` - safe circuit breaker
* `SafeRateLimiter` - safe rate limiting
* `SafeSemaphore` - safe semaphore logic

=== Platform and tooling

* `SafeArchive` - archive handling
* `SafeSQL` - SQL parameterization/building
* `SafeLog` - safe logging primitives
* `SafePolicy` - policy definitions
* `SafeCapability` - capability-based security
* `SafeDocker` - Docker-safe structures
* `SafeGit` - Git-safe structures
* `SafeMCP` - MCP-safe structures
* `SafeML` - ML-safe structures
* `SafeSchema` - schema definitions/validation
* `SafeEmail` - email parsing/validation
* `SafePhone` - phone number parsing/validation

== Notes

* This repo focuses on composition and documentation of safe cores.
* Runtime implementations are intentionally minimal and can be hosted elsewhere if needed.
